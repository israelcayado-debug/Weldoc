{% extends "base.html" %}

{% block content %}
  <h1>{{ item.number }}</h1>
  <p>Status: {{ item.status }}</p>
  <p>Project: {{ item.project }}</p>

  <h2>Traceability</h2>
  <p>
    <a href="/ui/welds/weld-attributes/?weld_id={{ item.id }}">View attributes</a> |
    <a href="/ui/welds/weld-attributes/new/?weld_id={{ item.id }}">Add attribute</a>
  </p>
  <ul>
    {% for attr in attributes %}
      <li>{{ attr.name }}: {{ attr.value }}</li>
    {% empty %}
      <li>No attributes.</li>
    {% endfor %}
  </ul>

  <p>
    <a href="/ui/welds/weld-materials/?weld_id={{ item.id }}">View materials</a> |
    <a href="/ui/welds/weld-materials/new/?weld_id={{ item.id }}">Add material</a>
  </p>
  <ul>
    {% for mat in materials %}
      <li>{{ mat.material }} (Heat {{ mat.heat_number }})</li>
    {% empty %}
      <li>No materials.</li>
    {% endfor %}
  </ul>

  <p>
    <a href="/ui/welds/weld-consumables/?weld_id={{ item.id }}">View consumables</a> |
    <a href="/ui/welds/weld-consumables/new/?weld_id={{ item.id }}">Add consumable</a>
  </p>
  <ul>
    {% for cons in consumables %}
      <li>{{ cons.consumable }} (Batch {{ cons.batch|default:"-" }})</li>
    {% empty %}
      <li>No consumables.</li>
    {% endfor %}
  </ul>

  <h2>Visual inspections</h2>
  <p>
    <a href="/ui/welds/visual-inspections/?weld_id={{ item.id }}">View inspections</a> |
    <a href="/ui/welds/visual-inspections/new/?weld_id={{ item.id }}">Add inspection</a>
  </p>
  <ul>
    {% for insp in inspections %}
      <li>{{ insp.stage }} - {{ insp.result }} - {{ insp.at }}</li>
    {% empty %}
      <li>No inspections.</li>
    {% endfor %}
  </ul>

  <p><a href="/ui/welds/">Back</a></p>
{% endblock %}
