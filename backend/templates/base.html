<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>WeldDoc</title>
    <style>
      :root { --sidebar-w: 240px; --bg: #f6f7f9; --card: #ffffff; --text: #1b1f24; --muted: #6b7280; --accent: #2563eb; }
      * { box-sizing: border-box; }
      body { margin: 0; font-family: "Segoe UI", Tahoma, Arial, sans-serif; color: var(--text); background: var(--bg); }
      .layout { display: flex; min-height: 100vh; }
      .sidebar { width: var(--sidebar-w); background: #111827; color: #e5e7eb; padding: 20px 16px; position: fixed; top: 0; left: 0; bottom: 0; }
      .brand { font-weight: 700; margin-bottom: 20px; }
      .nav a { display: block; color: #e5e7eb; text-decoration: none; padding: 8px 10px; border-radius: 6px; margin-bottom: 6px; }
      .nav a:hover { background: #1f2937; }
      .content { margin-left: var(--sidebar-w); padding: 24px; width: 100%; }
      .topbar { display: flex; justify-content: flex-end; align-items: center; margin-bottom: 16px; }
      .topbar-right { display: flex; align-items: center; gap: 10px; }
      .user-badge { background: #e5e7eb; color: #111827; border-radius: 999px; padding: 6px 12px; font-size: 14px; font-weight: 600; }
      .logout-form { margin: 0; }
      .logout-btn { border: 1px solid #d1d5db; background: #fff; color: #111827; border-radius: 8px; padding: 6px 10px; cursor: pointer; font-size: 14px; }
      .logout-btn:hover { background: #f3f4f6; }
      .login-link { text-decoration: none; color: var(--accent); font-weight: 600; }
      .card { background: var(--card); padding: 16px; border-radius: 10px; box-shadow: 0 1px 2px rgba(0,0,0,0.06); }
      .muted { color: var(--muted); }
    </style>
  </head>
  <body>
    <div class="layout">
      <aside class="sidebar">
        <div class="brand">WeldDoc</div>
        <nav class="nav">
          {% for item in nav_sections %}
            <a href="{{ item.url }}">{{ item.label }}</a>
          {% endfor %}
          {% if show_admin_nav %}
            <a href="/admin/">Admin</a>
          {% endif %}
        </nav>
      </aside>
      <main class="content">
        <header class="topbar">
          <div class="topbar-right">
            {% if request.user.is_authenticated %}
              <span class="user-badge">Usuario: {{ request.user.get_username }}</span>
              <form class="logout-form" method="post" action="/api-auth/logout/">
                {% csrf_token %}
                <button class="logout-btn" type="submit">Cerrar sesion</button>
              </form>
            {% else %}
              <a class="login-link" href="/api-auth/login/">Iniciar sesion</a>
            {% endif %}
          </div>
        </header>
        {% block content %}{% endblock %}
      </main>
    </div>
  </body>
</html>
